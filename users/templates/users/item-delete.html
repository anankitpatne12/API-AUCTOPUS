{% extends 'users/base.html' %}
{% block body %}
<form id="delete-form" method="POST">
    {% csrf_token %}
    <div class="container text-light" style="margin-top: 50px;">
        <h2 class="text-center mb-4" style="color: crimson;">Confirmation Page</h2>
        <h4 class="text-center">Are you sure you want to delete this entry: "{{object.student}}"?</h4>
        <div class="d-flex justify-content-center mt-5">
          <button class="btn btn-success mr-3" type="submit" style="margin-right: 10px;">Yes</button>
          <a href="{% url 'users:index' %}" class="btn btn-danger">Cancel</a>
        </div>
      </div>
</form>


  {% endblock %}

  {% block script%}
  <script>
    function redirectToAnotherPage() {
        window.location.href = "{% url 'users:index' %}";
      }
    $(document).ready(function() {
      $('#delete-form').submit(function(event) {
        event.preventDefault();
        var formData = $(this).serialize();
        var userId = {{ object.id }}; 
        $.ajax({
          url: '/http://127.0.0.1:8000/users/' + userId + '/' , endpoint URL
          method: 'DELETE',
          data: formData,
          success: function(response) {
            console.log('User deleted successfully:', response);
          },
          error: function(error) {
            console.error('Error deleting user:', error);
          }
        });
      });
    });
  </script>
  
    {% endblock %}